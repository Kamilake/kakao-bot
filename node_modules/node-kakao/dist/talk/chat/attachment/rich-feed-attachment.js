"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RichActionContent = exports.RichDescContent = exports.RichActionType = exports.RichFeedAttachment = void 0;
const chat_type_1 = require("../chat-type");
class RichFeedAttachment {
    constructor(Text = '', Icon, Image, Action, ImageAction, Description) {
        this.Text = Text;
        this.Icon = Icon;
        this.Image = Image;
        this.Action = Action;
        this.ImageAction = ImageAction;
        this.Description = Description;
    }
    readAttachment(rawJson) {
        this.Text = rawJson['text'] || '';
        if (rawJson['icon'])
            this.Icon = rawJson['icon'];
        if (rawJson['image'])
            this.Image = rawJson['image'];
        if (rawJson['description']) {
            this.Description = new RichDescContent();
            this.Description.readRawContent(rawJson['description']);
        }
        if (rawJson['action']) {
            this.Action = new RichActionContent();
            this.Action.readRawContent(rawJson['action']);
        }
        if (rawJson['imageAction']) {
            this.ImageAction = new RichActionContent();
            this.ImageAction.readRawContent(rawJson['imageAction']);
        }
    }
    toJsonAttachment() {
        let obj = {
            'text': this.Text
        };
        if (this.Icon)
            obj['icon'] = this.Icon;
        if (this.Image)
            obj['image'] = this.Image;
        if (this.Description)
            obj['description'] = this.Description.toRawContent();
        if (this.Action)
            obj['action'] = this.Action.toRawContent();
        if (this.ImageAction)
            obj['imageAction'] = this.ImageAction.toRawContent();
        return obj;
    }
    get RequiredMessageType() {
        return chat_type_1.ChatType.Feed;
    }
}
exports.RichFeedAttachment = RichFeedAttachment;
var RichActionType;
(function (RichActionType) {
    RichActionType["APP"] = "app";
})(RichActionType = exports.RichActionType || (exports.RichActionType = {}));
class RichDescContent {
    constructor(Nickname = '', Message = '') {
        this.Nickname = Nickname;
        this.Message = Message;
    }
    readRawContent(rawData) {
        this.Nickname = rawData['nickname'] || '';
        this.Message = rawData['message'] || '';
    }
    toRawContent() {
        return {
            'nickname': this.Nickname,
            'message': this.Message
        };
    }
}
exports.RichDescContent = RichDescContent;
class RichActionContent {
    constructor(Action = '', URL = '', URLAndroid, URLIos) {
        this.Action = Action;
        this.URL = URL;
        this.URLAndroid = URLAndroid;
        this.URLIos = URLIos;
    }
    readRawContent(rawData) {
        this.Action = rawData['action'] || '';
        this.URL = rawData['url'] || '';
        if (rawData['iu']) {
            if (rawData['iu']['android']) {
                this.URLAndroid = rawData['iu']['android'];
            }
            if (rawData['iu']['ios']) {
                this.URLIos = rawData['iu']['ios'];
            }
        }
    }
    toRawContent() {
        let obj = {
            'action': this.Action,
            'url': this.URL
        };
        if (this.URLAndroid || this.URLIos) {
            let iu = {};
            if (this.URLAndroid)
                iu['android'] = this.URLAndroid;
            if (this.URLIos)
                iu['ios'] = this.URLIos;
            obj['iu'] = iu;
        }
        return obj;
    }
}
exports.RichActionContent = RichActionContent;
//# sourceMappingURL=rich-feed-attachment.js.map